<!DOCTYPE html>
<html>
<head>
    <title>jsViddler Test Page</title>
    <link rel="stylesheet" type="text/css" href="history/history.css" />
    <script type="text/javascript" src="history/history.js"></script>
</head>
<body>
<h1>jsViddler Test Page</h1>
<div id="viddlerProxy"></div>
<form>
<dl>
    <dt>API Key</dt>
    <dd><input type="text" size="40" maxlength="40" name="apikey" id="apikey" />
    <dt>Echo</dt>
    <dd><input type="text" size="40" maxlength="40" name="echo" id="echo" /><input value="api.echo" type="button" onclick="onEchoClick(this.form);" />
    <dt>User</dt>
    <dd><input type="text" size="40" maxlength="40" name="user" id="user" /><input value="videos.getByUser" type="button" onclick="onUserVideosClick(this.form);" />
    <dt>Any</dt>
    <dd>
        <p>API Method: <input type="text" size="30" maxlength="30" name="methodName" id="methodName" /></p>
        <p>JSON Arguments: <input type="text" size="30" maxlength="30" name="methodArgs" id="methodArgs" /><input value="Go" type="button" onclick="onAnyClick(this.form);" /></p>
    </dd>
    <dt>Response</dt>
    <dd><textarea rows="10" cols="80" wrap="soft" name="apiresponse" id="apiresponse"></textarea></dd>
</dl>
<script type="text/javascript" src="swfobject.js"></script>
<script type="text/javascript">
// For version detection, set to min. required Flash Player version, or 0 (or 0.0.0), for no version detection. 
var swfVersionStr = "10.2.0";
// To use express install, set to playerProductInstall.swf, otherwise the empty string. 
var xiSwfUrlStr = "playerProductInstall.swf";
var flashvars = {};
var params = {};
params.quality = "high";
params.bgcolor = "#ffffff";
params.allowscriptaccess = "always";
params.allowfullscreen = "true";
var attributes = {};
attributes.id = "jsViddler";
attributes.name = "jsViddler";
attributes.align = "middle";
swfobject.embedSWF(
    "jsViddler.swf", "viddlerProxy", 
    "1", "1", 
    swfVersionStr, xiSwfUrlStr, 
    flashvars, params, attributes);
// JavaScript enabled so display the flashContent div in case it is not replaced with a swf object.
swfobject.createCSS("#flashContent", "display:block;text-align:left;");
var handleApiResponse = function(resp) {
    document.getElementById("apiresponse").value = JSON.stringify(resp);
};
var onEchoClick = function(f) {
    window.jsViddler.setKey(f.apikey.value);
    window.jsViddler.echo(f.echo.value, handleApiResponse);
};
var onUserVideosClick = function(f) {
    window.jsViddler.setKey(f.apikey.value);
    window.jsViddler.getUserVideos(f.user.value, handleApiResponse);
};
var onAnyClick = function(f) {
    window.jsViddler.setKey(f.apikey.value);
    window.jsViddler.apiCall(f.methodName.value,"GET", JSON.parse(f.methodArgs.value), handleApiResponse);
};
</script>
<script type="text/javascript" src="viddler.js"></script>

</html>